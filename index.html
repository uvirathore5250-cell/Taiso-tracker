//function render() {
    const cont = document.getElementById('listContainer'), term = document.getElementById('search').value.toLowerCase();
    const today = new Date().toISOString().split('T')[0];
    const todayKey = new Date().toLocaleDateString('en-IN');
    cont.innerHTML = '';

    [...clients].reverse().forEach((c) => {
        const rIdx = clients.indexOf(c);
        const isToday = c.date === today;
        const wasUpdatedToday = c.history && c.history.includes(`[${todayKey}] DONE:`);
        
        // NAYA LOGIC: Agar aaj save kiya hai ya aaj update kiya hai toh DONE mein dikhega
        const isActuallyDone = wasUpdatedToday; 
        const isActuallyPending = isToday && !wasUpdatedToday;

        if(callFilter === 'pending' && !isActuallyPending) return;
        if(callFilter === 'done' && !isActuallyDone && !isToday) return; // Aaj ki nayi entries bhi done mein dikhengi
        if(term && !c.name.toLowerCase().includes(term) && !c.phone.toString().includes(term)) return;

        const div = document.createElement('div');
        div.className = 'client-card';
        div.innerHTML = `
            <div style="display:flex; justify-content:space-between;">
                <b>${c.name} <small style="display:block; color:#666;">${c.phone}</small></b>
                <b style="color:var(--neon);">${c.date}</b>
            </div>
            <div class="history-box">${c.history}</div>
            <div class="btn-row">
                <button class="act-btn btn-upd" onclick="document.getElementById('f-${rIdx}').style.display='block'">ðŸ“ž UPDATE CALL</button>
            </div>
            <div id="f-${rIdx}" class="update-form">
                <input type="date" id="d-${rIdx}" value="${c.date}">
                <textarea id="m-${rIdx}" placeholder="Update notes..."></textarea>
                <button onclick="updateCall(${rIdx})" class="save-btn">SAVE & COMPLETE</button>
            </div>
        `;
        cont.appendChild(div);
    });
}
